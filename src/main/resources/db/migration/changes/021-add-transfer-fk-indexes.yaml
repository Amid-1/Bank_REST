# db/migration/changes/021-add-transfer-fk-indexes.yaml
databaseChangeLog:
  - changeSet:
      id: 021-1-create-ix-transfers-from
      author: suprunov
      preConditions:
        onFail: MARK_RAN
        not:
          indexExists:
            schemaName: public
            indexName: ix_transfers_from_card_id
      changes:
        - createIndex:
            schemaName: public
            tableName: transfers_record
            indexName: ix_transfers_from_card_id
            columns:
              - column:
                  name: from_card_id

  - changeSet:
      id: 021-2-create-ix-transfers-to
      author: suprunov
      preConditions:
        onFail: MARK_RAN
        not:
          indexExists:
            schemaName: public
            indexName: ix_transfers_to_card_id
      changes:
        - createIndex:
            schemaName: public
            tableName: transfers_record
            indexName: ix_transfers_to_card_id
            columns:
              - column:
                  name: to_card_id
